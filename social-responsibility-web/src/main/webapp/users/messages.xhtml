<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>


</h:head>
<h:body>

    <ui:composition template="../resources/template2.xhtml">
        <ui:param name="pageTitle" value="MzG"/>
        <ui:define name="content">
            <h:form id="test">
                <div class="col-lg-9">
                    <h2 class="h2">Mesajlar</h2><br/>
                    <div class=" well well-sm " style="width: 650px; ">

                        <table border="0" width="600" class="table-bordered" cellpadding="0" cellspacing="0">
                            <tr>
                                <td rowspan="2" width="60" height="50"><img width="60" height="60"
                                                                            src="../resources/upload/#{messagePageBean.advertisement.advertisementImageList.get(0).advertisementImageName}"/>
                                </td>
                                <td><strong><a href="#">#{messagePageBean.advertisement.advertisementTopic}</a></strong>
                                </td>

                            </tr>
                            <tr>
                                <td>
                                    <ol class="breadcrumb" style="padding: 0px; margin: 0px;">
                                        <li><a href="#">#{messagePageBean.advertisement.city.cityName}</a></li>
                                        <li class="active"><a
                                                href="#">#{messagePageBean.advertisement.district.districtName}</a></li>

                                    </ol>
                                </td>
                            </tr>
                        </table>
                    </div>

                    <div class="well  well-sm" style="width: 650px;">
                        <fieldset>
                            <legend>Süleyman Telli</legend>
                            <div class="scroll">
                                <table border="0" width="600">


                                    <ui:repeat value="#{messagePageBean.messageList()}" var="message" id="test">


                                        <h:panelGroup rendered="#{message.senderMemberId==loginBean.userId}" id="out1">

                                            <tr>
                                                <td align="right" colspan="2">
                                                    <div class="panel panel-default  " style="width: 350px; ">
                                                        <div class="panel-body bg-warning"
                                                             style="width: 350px; text-align: left; padding: 5px;">

                                                            <small>
                                                                #{message.message}
                                                            </small>
                                                            <br/>
                                                            <span class="pull-right text-muted">
                                                    <small><strong>#{message.messageSendTime}</strong></small></span><br/>

                                                        </div>
                                                    </div>

                                                </td>
                                            </tr>

                                        </h:panelGroup>

                                            <h:panelGroup rendered="#{message.senderMemberId!=loginBean.userId}">
                                            <tr>
                                                <td align="left" colspan="2">
                                                    <div class="panel panel-default" style="width: 350px;">
                                                        <div class="panel-body" style="width: 350px; padding: 5px;">
                                                            <small>
                                                                #{message.message}

                                                            </small>
                                                            <br/>
                                                            <span class="pull-right text-muted"><small><strong>#{message.messageSendTime}</strong></small></span><br/>

                                                        </div>
                                                    </div>

                                                </td>
                                            </tr>

                                    </h:panelGroup>
                                    </ui:repeat>

                                </table>
                            </div>
                        </fieldset>

                    </div>
                    <div class="well well-sm" style="width: 650px;">


                        <table border="0" width="610">
                            <tr>
                                <th valign="top">Mesajınız</th>
                                <td align="left"><p:inputText id="msg" value="#{messagePageBean.message.message}"/></td>
                            </tr>

                            <tr>
                                <td colspan="2" align="right">
                                    gondericii
                                    #{loginBean.userId}
                                    alıcı
                                    #{messagePageBean.message.receiverMemberId}




                                    <p:commandButton value="Gönder" icon="ui-icon-check"
                                                     styleClass="btn btn-primary btn-sm"
                                                     id="buton"
                                                     action="#{messagePageBean.sendMessage()}">

                                        <f:param name="sender" value="#{loginBean.userId}"></f:param>
                                        <f:param name="advertisement"
                                                 value="#{messagePageBean.message.advertisement.advertisementId}"/>
                                        <f:param name="receiver" value="#{messagePageBean.message.receiverMemberId}"/>


                                        <f:ajax render="test"/>


                                    </p:commandButton>

                                </td>
                            </tr>
                        </table>

                    </div>
                </div>


            </h:form>
        </ui:define>

    </ui:composition>
</h:body>
</html>